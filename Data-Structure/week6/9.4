""" 9.4 Write a program to read through the mbox-short.txt 
and figure out who has the sent the greatest number of mail messages.
The program looks for 'From ' lines and takes the second word of those lines as the person who sent the mail. 
The program creates a Python dictionary that maps the sender's mail address # to a count of the number of times they appear in the file. 
After the dictionary is produced, the program reads through the dictionary # using a maximum loop to find the most prolific committer."""



# hasznaljuk a kov.fajlt
name = raw_input("Enter file:")
if len(name) < 1 : name = "mbox-short.txt"
handle = open(name)

counts = dict()
# meg kell keresni a 'From'-mal kezdodoeket, 
for line in handle:
    if not line.startswith('From:'): continue
    # ki kell vagni a szavakat
    words = line.split()
    # a masodik lesz az email, ezt betesszuk a dict-be
    # ha mar benne van, megint betesszuk (+1)
    counts[words[1]] = counts.get(words[1], 0) +1
# megkeressuk azt az emailt, amibol a legtobb van
maxC = None
maxE = None
# megszamoljuk az emailcimeket a countsban:
for email, count in counts.items():
    # a maxC-ben kivalasztjuk a legnagyobb erteket (az eddigi kisebb helyett mindig a counstcban szereplo nagyobbat)
    # maxC = legtobb email darabszama, maxE = a hozza tartozo emailcim
    if maxC < count:
        maxC = count
        maxE = email

  
print maxE, maxC
    
"""
counts:
{'gopal.ramasammycook@gmail.com': 1, 'louis@media.berkeley.edu': 3,
'cwen@iupui.edu': 5, 'antranig@caret.cam.ac.uk': 1, 'rjlowe@iupui.edu': 2, 
'gsilver@umich.edu': 3, 'david.horwitz@uct.ac.za': 4, 'wagnermr@iupui.edu': 1,
'zqian@umich.edu': 4, 'stephen.marquard@uct.ac.za': 2, 'ray@media.berkeley.edu': 1}
cwen@iupui.edu 5"""
